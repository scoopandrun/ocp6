{% extends "base.html.twig" %}

{% block title %}
  {{ trick.name ? trick.name ~ " - Edit" : "Create trick" }}
{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('styles/trick/single.css') }}">
{% endblock %}

{% block body %}

  <header>
    {% if trick.id %}
      <div class="container mx-3 mx-sm-auto my-5 text-center main-media">
        <img
        src="{{ trick.mainMedia.url ?? asset('images/fallback-trick-image-1920.jpg') }}"
        class="main-media__image rounded"
        alt="{{ trick.name }}"
        >
        <div class="main-media__overlay rounded-bottom">
          <h1 class="main-media__trick-name">{{ trick.name }}</h1>
        </div>
      </div>
    {% else %}
      <div class="container text-center">
        <h1>Create trick</h1>    
      </div>
    {% endif %}
  </header>

  <main>
    <div class="container mb-5">
      {{ form(form, {'attr': {'id': form.vars.id} }) }}
      
      <div class="d-flex">
        <input
          type="submit"
          value="{{ trick.id ? 'Save changes' : 'Create new trick' }}"
          form="{{ form.vars.id }}"
          class="btn btn-primary"
        >

        {% if trick.id %}
          <form action="{{ path('trick.delete', {id: trick.id}) }}" method="post">
            <input type="hidden" name="_method" value="DELETE">
            <button
              class="btn btn-danger ms-3"
              type="submit"
              value="Delete"
              data-action="delete"
            >Delete</button>
          </form>
        {% endif %}
      </div>

    </div>
  </main>
{% endblock %}
